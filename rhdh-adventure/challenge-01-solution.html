<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup :: Red Hat Developer Hub Adventure</title>
    <link rel="canonical" href="https://blog.jromanmartin.io/rhdh-adventure/rhdh-adventure/index.html/rhdh-adventure/challenge-01-solution.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://blog.jromanmartin.io/rhdh-adventure/rhdh-adventure/index.html">Red Hat Developer Hub Adventure</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhdh-adventure" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-01.html">🚀 The Adventure Begins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-01.html#helmchart">📦 Helm Chart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-01.html#operator">👷 Operator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-02.html">🎨 Make It Your Own</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-02.html#configuration">🛠️ External configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-02.html#title">©️ Title it!</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-02.html#colors">🌈 Looking better</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-03.html">👨‍💻 Lock It Down</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-03.html#github-auth">🔑 Authentication with GitHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-03.html#gitlab-auth">🔑 Authentication with GitLab</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-03.html#rbac">🛂 You won&#8217;t break it</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-04.html">🕵🏻‍♂️ Import An Existing App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-04.html#declare">📝 Declare it</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-04.html#import">📂 Import it</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-05.html">🧾 Streamline Future App Dev</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-05.html#softwaretemplate">💀 Software Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-05.html#onboard">🛬 Onboarding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-06.html">🔌 Unlock New Capabilities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-06.html#dynamicplugins">🦄 Dynamic Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="challenge-07.html">🔬 Put It Under The Microscope</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-07.html#tools">🧰 Tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="challenge-07.html#metrics">👨‍🔬 Metrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat Developer Hub Adventure</a></li>
    <li><a href="challenge-01-solution.html">Setup</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/rmarting/rhdh-adventure/edit/master/documentation/modules/ROOT/pages/challenge-01-solution.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Setup</h1>
<div class="sect1">
<h2 id="intro-solution"><a class="anchor" href="#intro-solution"></a>🧞🚀 Let&#8217;s play Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Welcome! Don&#8217;t worry about being here—it&#8217;s absolutely okay! This section provides an example solution
to the challenge, offering a step-by-step implementation as a reference to guide you.</p>
</div>
<div class="paragraph">
<p>Remember, this is just one way to solve the challenge, and your approach might differ depending on
your creativity or specific requirements. Feel free to explore and adapt the solution to make it your own.
The goal is to help you understand the process and give you the confidence to tackle similar challenges
in the future. Let' 's dive in together! 🧞🚀</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="helm-solution"><a class="anchor" href="#helm-solution"></a>🧞📦 Helm Chart Solution</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The solution proposed assumes a namespace called <code>rhdh-by-helm</code> to store the different
manifests and objects to resolve it. If this project does not exist, exucute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project rhdh-by-helm</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Install or update the OpenShift Helm Charts catalog:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">helm repo add openshift-helm-charts <a href="https://charts.openshift.io/" class="bare">https://charts.openshift.io/</a>
helm repo update openshift-helm-charts</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To get the default values of Red Hat Developer Hub Helm Chart execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">helm show values openshift-helm-charts/redhat-developer-hub &gt; values.yaml</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are multiple values to customize Red Hat Developer Hub, however, for a simple installation
the endpoint variable is required by the <code>clusterRouterBase</code> variable. This variable represents the
base router base of any application exposed by OpenShift. We can get that value with the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export basedomain=$(oc whoami --show-console | sed -E 's~https?://console-openshift-console\.apps\.(.*)~apps.\1~')</code></pre>
</div>
</div>
<div class="paragraph">
<p>We export the value to the <code>basedomain</code> variable to reuse it along the adventure.</p>
</div>
<div class="paragraph">
<p>We need to create a <code>values.yaml</code> file to describe the configuration to apply to the Helm Chart.
The value of the <code>clusterRouterBase</code> variable must defined in the <code>values.yaml</code> file. This file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">global:
  clusterRouterBase: "${basedomain}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install Red Hat Developer Hub by the Helm Chart will be done by the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">helm upgrade --install rhdh \
    openshift-helm-charts/redhat-developer-hub \
    -f ./documentation/modules/ROOT/examples/challenge-01/values.yaml \
    --set global.clusterRouterBase=$basedomain \
    --namespace rhdh-by-helm</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Helm Chart will expose the Red Hat Developer Hub instance by an OpenShift router. This command
shows the full url to the new instance deployed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo <a href="https://$(oc" class="bare">https://$(oc</a> get route rhdh-developer-hub -n rhdh-by-helm -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can access and verify that Red Hat Developer Hub is running.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="operator-solution"><a class="anchor" href="#operator-solution"></a>🧞👷 Operator Solution</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The solution proposed assumes a namespace called <code>rhdh-by-operator</code> to store the different
manifests and objects to resolve it. If this project does not exist, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project rhdh-by-operator</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Install any Kubernetes Operator requires <code>cluster-admin</code> privileges. The installation of the operator
was done as part of the set up of the cluster with an administrator and it is available to any user.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Red Hat Developer Hub Operator provides the <code>Backstage</code> CRD to describe an instance of the application.
This object provides multiple options, however, the minimum configuration to deploy a single instance is
similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">---
apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: rhdh
spec:
  deployment:
    patch:
      spec:
        replicas: 1
  application:
    appConfig:
      mountPath: /opt/app-root/src
    extraFiles:
      mountPath: /opt/app-root/src
    extraEnvs:
      # Disabling TLS verification
      envs:
        - name: NODE_TLS_REJECT_UNAUTHORIZED
          value: '0'
    route:
      enabled: true
  database:
    enableLocalDb: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Applying that definition in the namespace, the operator will deploy that instance for us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f ./documentation/modules/ROOT/examples/challenge-01/rhdh-instance.yaml -n rhdh-by-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the deployment is finished, the status is identified as <code>Deployed</code>. This command shows that status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get backstage rhdh -o jsonpath='{.status.conditions[0].type}' -n rhdh-by-operator</code></pre>
</div>
</div>
<div class="paragraph">
<p>The instance is available at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo <a href="https://$(oc" class="bare">https://$(oc</a> get route backstage-rhdh -n rhdh-by-operator -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can access and verify that Red Hat Developer Hub is running.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
